<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LimeTalk ‚Äî –º–∏–Ω–∏-—á–∞—Ç —Å –ò–ò</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="dark-theme">
    <canvas id="snow-canvas"></canvas>

    <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ / —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ -->
    <div id="login-container">
        <div class="login-brand">
            <span class="brand-icon">üçã</span>
            <span class="brand-name">LimeTalk</span>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∏: –í—Ö–æ–¥ –ø–æ –∫–æ–¥—É / –í—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
        <div class="login-tabs">
            <button id="tab-code" class="login-tab active">–í—Ö–æ–¥ –ø–æ –∫–æ–¥—É</button>
            <button id="tab-password" class="login-tab">–í—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é</button>
            <button id="tab-register" class="login-tab">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>

        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –ø–æ –∫–æ–¥—É -->
        <div id="code-login">
            <div id="step-email">
                <input type="email" id="email-input" placeholder="–í–∞—à email" required>
                <button id="send-code-btn">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
                <div id="code-sent-message"></div>
            </div>
            <div id="step-code" style="display: none;">
                <input type="text" id="code-input" placeholder="6-–∑–Ω–∞—á–Ω—ã–π –∫–æ–¥" maxlength="6">
                <button id="verify-code-btn">–í–æ–π—Ç–∏</button>
                <div id="auth-message"></div>
            </div>
        </div>

        <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –ø–æ –ø–∞—Ä–æ–ª—é -->
        <div id="password-login" style="display: none;">
            <input type="email" id="login-email" placeholder="Email">
            <input type="password" id="login-password" placeholder="–ü–∞—Ä–æ–ª—å">
            <button id="login-password-btn">–í–æ–π—Ç–∏</button>
            <div id="login-error"></div>
        </div>

        <!-- –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å –ø–∞—Ä–æ–ª–µ–º -->
        <div id="register-form" style="display: none;">
            <input type="email" id="reg-email" placeholder="Email">
            <input type="text" id="reg-username" placeholder="–Æ–∑–µ—Ä–Ω–µ–π–º" maxlength="30">
            <input type="password" id="reg-password" placeholder="–ü–∞—Ä–æ–ª—å">
            <input type="text" id="reg-firstname" placeholder="–ò–º—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
            <input type="text" id="reg-lastname" placeholder="–§–∞–º–∏–ª–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
            <button id="register-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
            <div id="register-error"></div>
        </div>

        <!-- –ì–æ—Å—Ç–µ–≤–æ–π –≤—Ö–æ–¥ -->
        <button id="guest-login-btn">–í–æ–π—Ç–∏ –∫–∞–∫ –≥–æ—Å—Ç—å</button>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –≤—ã–±–æ—Ä–∞ —é–∑–µ—Ä–Ω–µ–π–º–∞ (–ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–æ –∫–æ–¥—É) -->
    <div id="username-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–í—ã–±–µ—Ä–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º</h2>
            <p>–Æ–∑–µ—Ä–Ω–µ–π–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º</p>
            <input type="text" id="modal-username" placeholder="–Æ–∑–µ—Ä–Ω–µ–π–º" maxlength="30">
            <input type="text" id="modal-firstname" placeholder="–ò–º—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
            <input type="text" id="modal-lastname" placeholder="–§–∞–º–∏–ª–∏—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)">
            <div id="modal-username-error" class="error"></div>
            <button id="modal-submit">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
        </div>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ -->
    <div id="chat-app">
        <div class="tg-app">
            <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="sidebar">
                <div class="app-brand">
                    <span class="brand-icon">üçã</span>
                    <span class="brand-name">LimeTalk</span>
                </div>
                <div class="profile-header" id="profile-header">
                    <img id="my-avatar" class="avatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='50' viewBox='0 0 50 50'%3E%3Ccircle cx='25' cy='25' r='25' fill='%232ea6ff'/%3E%3Ctext x='25' y='35' font-size='25' text-anchor='middle' fill='white' font-family='Arial'%3Eüçã%3C/text%3E%3C/svg%3E" alt="avatar">
                    <div class="profile-info">
                        <span id="my-name">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                        <span id="my-status"></span>
                    </div>
                </div>
                <div class="saved-messages-item" id="saved-messages-btn">
                    <span class="icon">üíæ</span> –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
                </div>
                <div class="settings-item" id="settings-btn">
                    <span class="icon">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </div>
                <div class="search">
                    <input type="text" id="search-contacts" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ —é–∑–µ—Ä–Ω–µ–π–º—É">
                    <div id="search-results" class="search-results"></div>
                </div>
                <div class="tabs">
                    <button class="active" id="tab-contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</button>
                    <button id="tab-groups">–ì—Ä—É–ø–ø—ã</button>
                    <button id="tab-channels">–ö–∞–Ω–∞–ª—ã</button>
                    <button id="tab-admin" style="display: none;">–ê–¥–º–∏–Ω</button>
                </div>
                <div class="user-list" id="users-list"></div>
                <div class="group-list" id="groups-list"></div>
                <div class="channels-list" id="channels-list">
                    <div class="channel-controls">
                        <input type="text" id="new-channel-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞">
                        <input type="text" id="new-channel-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ">
                        <button id="create-channel">–°–æ–∑–¥–∞—Ç—å</button>
                    </div>
                    <ul id="channels-ul"></ul>
                </div>
                <!-- –ë–ª–æ–∫ —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä—É–ø–ø—ã (—É–¥–∞–ª—ë–Ω) -->
            </div>

            <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="chat-area">
                <!-- –®–∞–ø–∫–∞ —á–∞—Ç–∞ -->
                <div class="chat-header" id="chat-header">
                    <button id="back-btn" class="back-btn">‚Üê</button>
                    <img id="chat-avatar" class="avatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Ccircle cx='20' cy='20' r='20' fill='%232ea6ff'/%3E%3Ctext x='20' y='28' font-size='20' text-anchor='middle' fill='white' font-family='Arial'%3Eüçã%3C/text%3E%3C/svg%3E">
                    <div class="chat-info">
                        <span id="chat-title">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç</span>
                        <span id="chat-status"></span>
                    </div>
                    <div class="header-icons">
                        <span>üîç</span>
                        <span>‚ãÆ</span>
                    </div>
                </div>
                <!-- –ó–∞–∫—Ä–µ–ø–ª—ë–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ -->
                <div id="pinned-message" class="pinned-message">
                    <span class="pin-icon">üìå</span>
                    <span id="pinned-text"></span>
                    <button id="unpin-btn" class="unpin-btn">‚úï</button>
                </div>
                <!-- –û–±–ª–∞—Å—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–π -->
                <div class="messages" id="messages"></div>
                <!-- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç–∞) -->
                <div id="admin-panel" class="admin-panel">
                    <h3>üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h3>
                    <div class="admin-columns">
                        <div class="admin-column">
                            <h4>üü¢ –û–Ω–ª–∞–π–Ω</h4>
                            <ul id="online-users"></ul>
                        </div>
                        <div class="admin-column">
                            <h4>‚ö™ –û—Ñ–ª–∞–π–Ω</h4>
                            <ul id="offline-users"></ul>
                        </div>
                    </div>
                    <div class="broadcast-section">
                        <h3>üì¢ –†–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º</h3>
                        <textarea id="broadcast-message" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö..."></textarea>
                        <button id="send-broadcast">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º</button>
                        <div id="broadcast-status"></div>
                    </div>
                    <div style="margin-top: 20px;">
                        <button id="delete-all-accounts" class="danger-btn">üî• –£–¥–∞–ª–∏—Ç—å –í–°–ï –∞–∫–∫–∞—É–Ω—Ç—ã</button>
                    </div>
                </div>
                <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è -->
                <div class="input-area" id="input-area">
                    <button id="attach-btn">üìé</button>
                    <button id="voice-btn">üé§</button>
                    <input type="text" id="message-input" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                    <button id="send-btn">‚û§</button>
                </div>
                <!-- –ü–∞–Ω–µ–ª—å –∑–∞–ø–∏—Å–∏ –≥–æ–ª–æ—Å–∞ -->
                <div class="voice-recording" id="voice-panel">
                    <span>–ó–∞–ø–∏—Å—å...</span>
                    <button id="stop-recording">‚èπÔ∏è</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div id="profile-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</h2>
            <img id="modal-avatar" class="avatar" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='50' height='50' viewBox='0 0 50 50'%3E%3Ccircle cx='25' cy='25' r='25' fill='%232ea6ff'/%3E%3Ctext x='25' y='35' font-size='25' text-anchor='middle' fill='white' font-family='Arial'%3Eüçã%3C/text%3E%3C/svg%3E">
            <input type="file" id="avatar-upload" accept="image/*">
            <input type="text" id="edit-firstname" placeholder="–ò–º—è">
            <input type="text" id="edit-lastname" placeholder="–§–∞–º–∏–ª–∏—è">
            <input type="text" id="edit-username" placeholder="–ù–∏–∫–Ω–µ–π–º">
            <input type="text" id="edit-status" placeholder="–°—Ç–∞—Ç—É—Å">
            <input type="password" id="edit-new-password" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)">
            <button id="save-profile">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <span class="close" id="close-settings">&times;</span>
            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
            <div class="user-info-settings">
                <p><strong>–í–∞—à –Ω–∏–∫–Ω–µ–π–º:</strong> <span id="settings-username">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
            </div>
            <div class="theme-switcher">
                <label>–¢–µ–º–∞:</label>
                <button id="theme-dark">–¢—ë–º–Ω–∞—è</button>
                <button id="theme-light">–°–≤–µ—Ç–ª–∞—è</button>
            </div>
            <div style="margin: 10px 0;">
                <button id="toggle-snow" class="snow-btn">‚ùÑÔ∏è –í–∫–ª—é—á–∏—Ç—å —Å–Ω–µ–≥</button>
            </div>
            <hr>
            <button id="delete-account-btn" class="danger-btn">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>